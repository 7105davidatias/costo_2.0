# פרומפט תיקון מפורט - תפקידים וממשקים מותאמים - Replit Agent

## בעיות שזוהו במימוש הנוכחי

לאחר בחינת המערכת שיצרת, זוהו שני ליקויים מרכזיים שדורשים תיקון מיידי:

### בעיה 1: תפקידים שגויים
המערכת יצרה 4 תפקידים שאינם תואמים למסמך האפיון:
- ❌ **מנהל מערכת** (admin@company.com) - נכון
- ❌ **מנהל רכש** (procurement@company.com) - צריך להיות "איש רכש"
- ❌ **ראש מחלקה** (department@company.com) - צריך להיות "כלכלן"
- ❌ **עובד** (employee@company.com) - צריך להיות "קב"ט"

### בעיה 2: ממשק זהה לכל התפקידים
כל המשתמשים רואים את אותו לוח הבקרה הכללי במקום ממשקים מותאמים לתפקידם הספציפי.

## התיקונים הנדרשים

### שלב 1: תיקון התפקידים במסד הנתונים

עדכן את מסד הנתונים ליצור 4 משתמשי דמו נכונים:

```python
# עדכן את קובץ שיוצר את משתמשי הדמו
demo_users = [
    {
        'username': 'system_admin',
        'email': 'admin@company.com',
        'password': 'demo123',
        'role': 'system_admin',
        'first_name': 'דוד',
        'last_name': 'כהן',
        'department': 'מערכות מידע',
        'phone': '050-1234567'
    },
    {
        'username': 'economist',
        'email': 'economist@company.com',
        'password': 'demo123',
        'role': 'economist',
        'first_name': 'רחל',
        'last_name': 'לוי',
        'department': 'כלכלה',
        'phone': '050-2345678'
    },
    {
        'username': 'procurement_officer',
        'email': 'procurement@company.com',
        'password': 'demo123',
        'role': 'procurement',
        'first_name': 'משה',
        'last_name': 'אברהם',
        'department': 'רכש',
        'phone': '050-3456789'
    },
    {
        'username': 'security_officer',
        'email': 'security@company.com',
        'password': 'demo123',
        'role': 'security',
        'first_name': 'שרה',
        'last_name': 'דוד',
        'department': 'ביטחון מידע',
        'phone': '050-4567890'
    }
]
```

### שלב 2: עדכון דף הכניסה

עדכן את דף הכניסה להציג את התפקידים הנכונים:

```javascript
// עדכן את רשימת המשתמשים בדף הכניסה
const demoUsers = [
  {
    email: 'admin@company.com',
    role: 'מנהל מערכת',
    description: 'גישה מלאה לכל המערכת',
    icon: '👨‍💼'
  },
  {
    email: 'economist@company.com',
    role: 'כלכלן',
    description: 'אישור ובקרת אומדנים',
    icon: '📊'
  },
  {
    email: 'procurement@company.com',
    role: 'איש רכש',
    description: 'יצירת אומדנים חדשים',
    icon: '🛒'
  },
  {
    email: 'security@company.com',
    role: 'קב"ט',
    description: 'בקרת ביטחון מידע',
    icon: '🔒'
  }
];
```

### שלב 3: יצירת ממשקים מותאמים לכל תפקיד

צור 4 קומפוננטים נפרדים עבור כל תפקיד:

#### 3.1 דשבורד מנהל מערכת

```javascript
// צור קובץ: src/components/SystemAdminDashboard.jsx
import React, { useState, useEffect } from 'react';
import { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';
import { Button } from '@/components/ui/button';
import { Badge } from '@/components/ui/badge';

const SystemAdminDashboard = () => {
  const [systemStats, setSystemStats] = useState({
    activeUsers: 12,
    totalEstimates: 156,
    systemUptime: '99.9%',
    securityAlerts: 3
  });

  const [users, setUsers] = useState([]);
  const [showAddUser, setShowAddUser] = useState(false);

  return (
    <div className="min-h-screen bg-gray-50 rtl">
      {/* Header */}
      <div className="bg-white shadow-sm border-b">
        <div className="max-w-7xl mx-auto px-4 py-4">
          <div className="flex justify-between items-center">
            <h1 className="text-2xl font-bold text-gray-900">דשבורד מנהל מערכת</h1>
            <div className="flex items-center gap-4">
              <Badge variant="outline">מנהל מערכת</Badge>
              <Button variant="outline" size="sm">יציאה</Button>
            </div>
          </div>
        </div>
      </div>

      <div className="max-w-7xl mx-auto px-4 py-8">
        {/* סטטיסטיקות מערכת */}
        <div className="grid grid-cols-1 md:grid-cols-4 gap-6 mb-8">
          <Card>
            <CardHeader className="text-center">
              <CardTitle className="text-sm font-medium text-gray-600">משתמשים פעילים</CardTitle>
            </CardHeader>
            <CardContent className="text-center">
              <div className="text-3xl font-bold text-blue-600">{systemStats.activeUsers}</div>
              <p className="text-sm text-gray-500">השבוע</p>
            </CardContent>
          </Card>

          <Card>
            <CardHeader className="text-center">
              <CardTitle className="text-sm font-medium text-gray-600">סה"כ אומדנים</CardTitle>
            </CardHeader>
            <CardContent className="text-center">
              <div className="text-3xl font-bold text-green-600">{systemStats.totalEstimates}</div>
              <p className="text-sm text-gray-500">החודש</p>
            </CardContent>
          </Card>

          <Card>
            <CardHeader className="text-center">
              <CardTitle className="text-sm font-medium text-gray-600">זמינות מערכת</CardTitle>
            </CardHeader>
            <CardContent className="text-center">
              <div className="text-3xl font-bold text-green-600">{systemStats.systemUptime}</div>
              <p className="text-sm text-gray-500">החודש</p>
            </CardContent>
          </Card>

          <Card>
            <CardHeader className="text-center">
              <CardTitle className="text-sm font-medium text-gray-600">התראות ביטחון</CardTitle>
            </CardHeader>
            <CardContent className="text-center">
              <div className="text-3xl font-bold text-red-600">{systemStats.securityAlerts}</div>
              <p className="text-sm text-gray-500">פעילות</p>
            </CardContent>
          </Card>
        </div>

        {/* ניהול משתמשים */}
        <Card className="mb-8">
          <CardHeader>
            <div className="flex justify-between items-center">
              <CardTitle>ניהול משתמשים</CardTitle>
              <Button onClick={() => setShowAddUser(true)}>
                הוסף משתמש חדש
              </Button>
            </div>
          </CardHeader>
          <CardContent>
            <div className="overflow-x-auto">
              <table className="w-full">
                <thead>
                  <tr className="border-b">
                    <th className="text-right p-3">שם משתמש</th>
                    <th className="text-right p-3">אימייל</th>
                    <th className="text-right p-3">תפקיד</th>
                    <th className="text-right p-3">מחלקה</th>
                    <th className="text-right p-3">סטטוס</th>
                    <th className="text-right p-3">פעולות</th>
                  </tr>
                </thead>
                <tbody>
                  <tr className="border-b">
                    <td className="p-3">דוד כהן</td>
                    <td className="p-3">admin@company.com</td>
                    <td className="p-3">מנהל מערכת</td>
                    <td className="p-3">מערכות מידע</td>
                    <td className="p-3">
                      <Badge className="bg-green-100 text-green-800">פעיל</Badge>
                    </td>
                    <td className="p-3">
                      <Button size="sm" variant="outline">ערוך</Button>
                    </td>
                  </tr>
                  <tr className="border-b">
                    <td className="p-3">רחל לוי</td>
                    <td className="p-3">economist@company.com</td>
                    <td className="p-3">כלכלן</td>
                    <td className="p-3">כלכלה</td>
                    <td className="p-3">
                      <Badge className="bg-green-100 text-green-800">פעיל</Badge>
                    </td>
                    <td className="p-3">
                      <Button size="sm" variant="outline">ערוך</Button>
                    </td>
                  </tr>
                  <tr className="border-b">
                    <td className="p-3">משה אברהם</td>
                    <td className="p-3">procurement@company.com</td>
                    <td className="p-3">איש רכש</td>
                    <td className="p-3">רכש</td>
                    <td className="p-3">
                      <Badge className="bg-green-100 text-green-800">פעיל</Badge>
                    </td>
                    <td className="p-3">
                      <Button size="sm" variant="outline">ערוך</Button>
                    </td>
                  </tr>
                  <tr className="border-b">
                    <td className="p-3">שרה דוד</td>
                    <td className="p-3">security@company.com</td>
                    <td className="p-3">קב"ט</td>
                    <td className="p-3">ביטחון מידע</td>
                    <td className="p-3">
                      <Badge className="bg-green-100 text-green-800">פעיל</Badge>
                    </td>
                    <td className="p-3">
                      <Button size="sm" variant="outline">ערוך</Button>
                    </td>
                  </tr>
                </tbody>
              </table>
            </div>
          </CardContent>
        </Card>

        {/* לוגי מערכת */}
        <Card>
          <CardHeader>
            <CardTitle>פעילות מערכת אחרונה</CardTitle>
          </CardHeader>
          <CardContent>
            <div className="space-y-3">
              <div className="flex justify-between items-center p-3 bg-gray-50 rounded">
                <span>משתמש רחל לוי התחבר למערכת</span>
                <span className="text-sm text-gray-500">לפני 5 דקות</span>
              </div>
              <div className="flex justify-between items-center p-3 bg-gray-50 rounded">
                <span>נוצר אומדן חדש - REQ-2024-017</span>
                <span className="text-sm text-gray-500">לפני 15 דקות</span>
              </div>
              <div className="flex justify-between items-center p-3 bg-yellow-50 rounded">
                <span>התראת ביטחון - ניסיון גישה חשוד</span>
                <span className="text-sm text-gray-500">לפני שעה</span>
              </div>
            </div>
          </CardContent>
        </Card>
      </div>
    </div>
  );
};

export default SystemAdminDashboard;
```

#### 3.2 דשבורד כלכלן

```javascript
// צור קובץ: src/components/EconomistDashboard.jsx
import React, { useState, useEffect } from 'react';
import { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';
import { Button } from '@/components/ui/button';
import { Badge } from '@/components/ui/badge';

const EconomistDashboard = () => {
  const [pendingApprovals, setPendingApprovals] = useState([
    {
      id: 'REQ-2024-016',
      title: 'רכש 10 רכבי צי',
      amount: '₪2,400,000',
      submittedBy: 'משה אברהם',
      date: '2024-01-15',
      status: 'ממתין לאישור'
    },
    {
      id: 'REQ-2024-017',
      title: 'בניית מחסן חדש',
      amount: '₪5,200,000',
      submittedBy: 'משה אברהם',
      date: '2024-01-14',
      status: 'ממתין לאישור'
    }
  ]);

  const [economicStats, setEconomicStats] = useState({
    pendingApprovals: 5,
    approvedThisMonth: 23,
    totalSavings: '₪1,250,000',
    averageAccuracy: '94.2%'
  });

  return (
    <div className="min-h-screen bg-gray-50 rtl">
      {/* Header */}
      <div className="bg-white shadow-sm border-b">
        <div className="max-w-7xl mx-auto px-4 py-4">
          <div className="flex justify-between items-center">
            <h1 className="text-2xl font-bold text-gray-900">דשבורד כלכלן</h1>
            <div className="flex items-center gap-4">
              <Badge variant="outline" className="bg-blue-50 text-blue-700">כלכלן</Badge>
              <Button variant="outline" size="sm">יציאה</Button>
            </div>
          </div>
        </div>
      </div>

      <div className="max-w-7xl mx-auto px-4 py-8">
        {/* סטטיסטיקות כלכליות */}
        <div className="grid grid-cols-1 md:grid-cols-4 gap-6 mb-8">
          <Card>
            <CardHeader className="text-center">
              <CardTitle className="text-sm font-medium text-gray-600">ממתינים לאישור</CardTitle>
            </CardHeader>
            <CardContent className="text-center">
              <div className="text-3xl font-bold text-orange-600">{economicStats.pendingApprovals}</div>
              <p className="text-sm text-gray-500">אומדנים</p>
            </CardContent>
          </Card>

          <Card>
            <CardHeader className="text-center">
              <CardTitle className="text-sm font-medium text-gray-600">אושרו החודש</CardTitle>
            </CardHeader>
            <CardContent className="text-center">
              <div className="text-3xl font-bold text-green-600">{economicStats.approvedThisMonth}</div>
              <p className="text-sm text-gray-500">אומדנים</p>
            </CardContent>
          </Card>

          <Card>
            <CardHeader className="text-center">
              <CardTitle className="text-sm font-medium text-gray-600">חיסכון כולל</CardTitle>
            </CardHeader>
            <CardContent className="text-center">
              <div className="text-3xl font-bold text-blue-600">{economicStats.totalSavings}</div>
              <p className="text-sm text-gray-500">השנה</p>
            </CardContent>
          </Card>

          <Card>
            <CardHeader className="text-center">
              <CardTitle className="text-sm font-medium text-gray-600">דיוק ממוצע</CardTitle>
            </CardHeader>
            <CardContent className="text-center">
              <div className="text-3xl font-bold text-purple-600">{economicStats.averageAccuracy}</div>
              <p className="text-sm text-gray-500">אומדנים</p>
            </CardContent>
          </Card>
        </div>

        {/* תור אישורים */}
        <Card className="mb-8">
          <CardHeader>
            <CardTitle>תור אומדנים לאישור</CardTitle>
          </CardHeader>
          <CardContent>
            <div className="space-y-4">
              {pendingApprovals.map(approval => (
                <div key={approval.id} className="border rounded-lg p-4 bg-white">
                  <div className="flex justify-between items-start mb-3">
                    <div>
                      <h3 className="font-semibold text-lg">{approval.title}</h3>
                      <p className="text-gray-600">מספר דרישה: {approval.id}</p>
                      <p className="text-sm text-gray-500">הוגש על ידי: {approval.submittedBy}</p>
                    </div>
                    <div className="text-left">
                      <div className="text-2xl font-bold text-blue-600">{approval.amount}</div>
                      <Badge className="bg-orange-100 text-orange-800">{approval.status}</Badge>
                    </div>
                  </div>
                  <div className="flex gap-3">
                    <Button size="sm" className="bg-green-600 hover:bg-green-700">
                      אשר אומדן
                    </Button>
                    <Button size="sm" variant="outline">
                      בדוק פרטים
                    </Button>
                    <Button size="sm" variant="outline" className="text-red-600 border-red-300">
                      דחה
                    </Button>
                  </div>
                </div>
              ))}
            </div>
          </CardContent>
        </Card>

        {/* דוחות כלכליים */}
        <Card>
          <CardHeader>
            <CardTitle>דוחות כלכליים</CardTitle>
          </CardHeader>
          <CardContent>
            <div className="grid grid-cols-1 md:grid-cols-3 gap-4">
              <Button variant="outline" className="h-20 flex flex-col">
                <span className="font-semibold">דוח חיסכון חודשי</span>
                <span className="text-sm text-gray-500">ינואר 2024</span>
              </Button>
              <Button variant="outline" className="h-20 flex flex-col">
                <span className="font-semibold">ניתוח מגמות עלויות</span>
                <span className="text-sm text-gray-500">Q4 2023</span>
              </Button>
              <Button variant="outline" className="h-20 flex flex-col">
                <span className="font-semibold">השוואת שיטות אומדן</span>
                <span className="text-sm text-gray-500">2023</span>
              </Button>
            </div>
          </CardContent>
        </Card>
      </div>
    </div>
  );
};

export default EconomistDashboard;
```

#### 3.3 דשבורד איש רכש

```javascript
// צור קובץ: src/components/ProcurementDashboard.jsx
import React, { useState, useEffect } from 'react';
import { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';
import { Button } from '@/components/ui/button';
import { Badge } from '@/components/ui/badge';

const ProcurementDashboard = () => {
  const [procurementRequests, setProcurementRequests] = useState([
    {
      id: 'REQ-2024-018',
      title: 'רכש ציוד מחשוב למשרדים',
      status: 'חדש',
      priority: 'גבוה',
      deadline: '2024-02-01'
    },
    {
      id: 'REQ-2024-019',
      title: 'שירותי תחזוקה למתקנים',
      status: 'בעיבוד',
      priority: 'בינוני',
      deadline: '2024-02-15'
    }
  ]);

  const [myEstimates, setMyEstimates] = useState([
    {
      id: 'REQ-2024-016',
      title: 'רכש 10 רכבי צי',
      status: 'ממתין לאישור כלכלן',
      amount: '₪2,400,000',
      submittedDate: '2024-01-15'
    }
  ]);

  const [procurementStats, setProcurementStats] = useState({
    newRequests: 8,
    inProgress: 12,
    completed: 45,
    totalValue: '₪15,600,000'
  });

  return (
    <div className="min-h-screen bg-gray-50 rtl">
      {/* Header */}
      <div className="bg-white shadow-sm border-b">
        <div className="max-w-7xl mx-auto px-4 py-4">
          <div className="flex justify-between items-center">
            <h1 className="text-2xl font-bold text-gray-900">דשבורד איש רכש</h1>
            <div className="flex items-center gap-4">
              <Badge variant="outline" className="bg-green-50 text-green-700">איש רכש</Badge>
              <Button variant="outline" size="sm">יציאה</Button>
            </div>
          </div>
        </div>
      </div>

      <div className="max-w-7xl mx-auto px-4 py-8">
        {/* סטטיסטיקות רכש */}
        <div className="grid grid-cols-1 md:grid-cols-4 gap-6 mb-8">
          <Card>
            <CardHeader className="text-center">
              <CardTitle className="text-sm font-medium text-gray-600">דרישות חדשות</CardTitle>
            </CardHeader>
            <CardContent className="text-center">
              <div className="text-3xl font-bold text-blue-600">{procurementStats.newRequests}</div>
              <p className="text-sm text-gray-500">ממתינות</p>
            </CardContent>
          </Card>

          <Card>
            <CardHeader className="text-center">
              <CardTitle className="text-sm font-medium text-gray-600">בעיבוד</CardTitle>
            </CardHeader>
            <CardContent className="text-center">
              <div className="text-3xl font-bold text-orange-600">{procurementStats.inProgress}</div>
              <p className="text-sm text-gray-500">אומדנים</p>
            </CardContent>
          </Card>

          <Card>
            <CardHeader className="text-center">
              <CardTitle className="text-sm font-medium text-gray-600">הושלמו</CardTitle>
            </CardHeader>
            <CardContent className="text-center">
              <div className="text-3xl font-bold text-green-600">{procurementStats.completed}</div>
              <p className="text-sm text-gray-500">החודש</p>
            </CardContent>
          </Card>

          <Card>
            <CardHeader className="text-center">
              <CardTitle className="text-sm font-medium text-gray-600">ערך כולל</CardTitle>
            </CardHeader>
            <CardContent className="text-center">
              <div className="text-3xl font-bold text-purple-600">{procurementStats.totalValue}</div>
              <p className="text-sm text-gray-500">השנה</p>
            </CardContent>
          </Card>
        </div>

        {/* דרישות רכש חדשות */}
        <Card className="mb-8">
          <CardHeader>
            <div className="flex justify-between items-center">
              <CardTitle>דרישות רכש חדשות</CardTitle>
              <Button>צור אומדן חדש</Button>
            </div>
          </CardHeader>
          <CardContent>
            <div className="space-y-4">
              {procurementRequests.map(request => (
                <div key={request.id} className="border rounded-lg p-4 bg-white">
                  <div className="flex justify-between items-start mb-3">
                    <div>
                      <h3 className="font-semibold text-lg">{request.title}</h3>
                      <p className="text-gray-600">מספר דרישה: {request.id}</p>
                      <p className="text-sm text-gray-500">תאריך יעד: {request.deadline}</p>
                    </div>
                    <div className="flex flex-col gap-2">
                      <Badge className={
                        request.status === 'חדש' ? 'bg-blue-100 text-blue-800' :
                        request.status === 'בעיבוד' ? 'bg-orange-100 text-orange-800' :
                        'bg-green-100 text-green-800'
                      }>
                        {request.status}
                      </Badge>
                      <Badge variant="outline" className={
                        request.priority === 'גבוה' ? 'border-red-300 text-red-700' :
                        request.priority === 'בינוני' ? 'border-orange-300 text-orange-700' :
                        'border-green-300 text-green-700'
                      }>
                        {request.priority}
                      </Badge>
                    </div>
                  </div>
                  <div className="flex gap-3">
                    <Button size="sm" className="bg-blue-600 hover:bg-blue-700">
                      התחל ניתוח AI
                    </Button>
                    <Button size="sm" variant="outline">
                      צפה בפרטים
                    </Button>
                    <Button size="sm" variant="outline">
                      מחקר שוק
                    </Button>
                  </div>
                </div>
              ))}
            </div>
          </CardContent>
        </Card>

        {/* האומדנים שלי */}
        <Card>
          <CardHeader>
            <CardTitle>האומדנים שלי</CardTitle>
          </CardHeader>
          <CardContent>
            <div className="space-y-4">
              {myEstimates.map(estimate => (
                <div key={estimate.id} className="border rounded-lg p-4 bg-white">
                  <div className="flex justify-between items-start mb-3">
                    <div>
                      <h3 className="font-semibold text-lg">{estimate.title}</h3>
                      <p className="text-gray-600">מספר דרישה: {estimate.id}</p>
                      <p className="text-sm text-gray-500">הוגש: {estimate.submittedDate}</p>
                    </div>
                    <div className="text-left">
                      <div className="text-xl font-bold text-blue-600">{estimate.amount}</div>
                      <Badge className="bg-orange-100 text-orange-800">{estimate.status}</Badge>
                    </div>
                  </div>
                  <div className="flex gap-3">
                    <Button size="sm" variant="outline">
                      ערוך אומדן
                    </Button>
                    <Button size="sm" variant="outline">
                      צפה בפרטים
                    </Button>
                  </div>
                </div>
              ))}
            </div>
          </CardContent>
        </Card>
      </div>
    </div>
  );
};

export default ProcurementDashboard;
```

#### 3.4 דשבורד קב"ט

```javascript
// צור קובץ: src/components/SecurityDashboard.jsx
import React, { useState, useEffect } from 'react';
import { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';
import { Button } from '@/components/ui/button';
import { Badge } from '@/components/ui/badge';

const SecurityDashboard = () => {
  const [securityAlerts, setSecurityAlerts] = useState([
    {
      id: 'SEC-001',
      type: 'תוכן רגיש',
      description: 'זוהה ציון שם יחידה צבאית באומדן REQ-2024-016',
      severity: 'גבוה',
      timestamp: '2024-01-15 14:30',
      status: 'פתוח'
    },
    {
      id: 'SEC-002',
      type: 'גישה חשודה',
      description: 'ניסיון כניסה מכתובת IP לא מוכרת',
      severity: 'בינוני',
      timestamp: '2024-01-15 12:15',
      status: 'בטיפול'
    }
  ]);

  const [auditLogs, setAuditLogs] = useState([
    {
      id: 1,
      user: 'משה אברהם',
      action: 'יצירת אומדן',
      details: 'REQ-2024-016 - רכש 10 רכבי צי',
      timestamp: '2024-01-15 14:25',
      ip: '192.168.1.100'
    },
    {
      id: 2,
      user: 'רחל לוי',
      action: 'התחברות למערכת',
      details: 'התחברות מוצלחת',
      timestamp: '2024-01-15 13:45',
      ip: '192.168.1.105'
    }
  ]);

  const [securityStats, setSecurityStats] = useState({
    activeAlerts: 3,
    resolvedToday: 7,
    totalUsers: 12,
    systemUptime: '99.9%'
  });

  return (
    <div className="min-h-screen bg-gray-50 rtl">
      {/* Header */}
      <div className="bg-white shadow-sm border-b">
        <div className="max-w-7xl mx-auto px-4 py-4">
          <div className="flex justify-between items-center">
            <h1 className="text-2xl font-bold text-gray-900">דשבורד קב"ט</h1>
            <div className="flex items-center gap-4">
              <Badge variant="outline" className="bg-red-50 text-red-700">קב"ט</Badge>
              <Button variant="outline" size="sm">יציאה</Button>
            </div>
          </div>
        </div>
      </div>

      <div className="max-w-7xl mx-auto px-4 py-8">
        {/* סטטיסטיקות ביטחון */}
        <div className="grid grid-cols-1 md:grid-cols-4 gap-6 mb-8">
          <Card>
            <CardHeader className="text-center">
              <CardTitle className="text-sm font-medium text-gray-600">התראות פעילות</CardTitle>
            </CardHeader>
            <CardContent className="text-center">
              <div className="text-3xl font-bold text-red-600">{securityStats.activeAlerts}</div>
              <p className="text-sm text-gray-500">דורשות טיפול</p>
            </CardContent>
          </Card>

          <Card>
            <CardHeader className="text-center">
              <CardTitle className="text-sm font-medium text-gray-600">טופלו היום</CardTitle>
            </CardHeader>
            <CardContent className="text-center">
              <div className="text-3xl font-bold text-green-600">{securityStats.resolvedToday}</div>
              <p className="text-sm text-gray-500">התראות</p>
            </CardContent>
          </Card>

          <Card>
            <CardHeader className="text-center">
              <CardTitle className="text-sm font-medium text-gray-600">משתמשים פעילים</CardTitle>
            </CardHeader>
            <CardContent className="text-center">
              <div className="text-3xl font-bold text-blue-600">{securityStats.totalUsers}</div>
              <p className="text-sm text-gray-500">במערכת</p>
            </CardContent>
          </Card>

          <Card>
            <CardHeader className="text-center">
              <CardTitle className="text-sm font-medium text-gray-600">זמינות מערכת</CardTitle>
            </CardHeader>
            <CardContent className="text-center">
              <div className="text-3xl font-bold text-green-600">{securityStats.systemUptime}</div>
              <p className="text-sm text-gray-500">החודש</p>
            </CardContent>
          </Card>
        </div>

        {/* התראות ביטחון */}
        <Card className="mb-8">
          <CardHeader>
            <CardTitle>התראות ביטחון</CardTitle>
          </CardHeader>
          <CardContent>
            <div className="space-y-4">
              {securityAlerts.map(alert => (
                <div key={alert.id} className="border rounded-lg p-4 bg-white">
                  <div className="flex justify-between items-start mb-3">
                    <div>
                      <h3 className="font-semibold text-lg">{alert.type}</h3>
                      <p className="text-gray-600">{alert.description}</p>
                      <p className="text-sm text-gray-500">זמן: {alert.timestamp}</p>
                    </div>
                    <div className="flex flex-col gap-2">
                      <Badge className={
                        alert.severity === 'גבוה' ? 'bg-red-100 text-red-800' :
                        alert.severity === 'בינוני' ? 'bg-orange-100 text-orange-800' :
                        'bg-yellow-100 text-yellow-800'
                      }>
                        {alert.severity}
                      </Badge>
                      <Badge variant="outline" className={
                        alert.status === 'פתוח' ? 'border-red-300 text-red-700' :
                        alert.status === 'בטיפול' ? 'border-orange-300 text-orange-700' :
                        'border-green-300 text-green-700'
                      }>
                        {alert.status}
                      </Badge>
                    </div>
                  </div>
                  <div className="flex gap-3">
                    <Button size="sm" className="bg-red-600 hover:bg-red-700">
                      טפל בהתראה
                    </Button>
                    <Button size="sm" variant="outline">
                      צפה בפרטים
                    </Button>
                    <Button size="sm" variant="outline">
                      סגור התראה
                    </Button>
                  </div>
                </div>
              ))}
            </div>
          </CardContent>
        </Card>

        {/* לוג ביקורת */}
        <Card>
          <CardHeader>
            <CardTitle>לוג ביקורת - פעילות אחרונה</CardTitle>
          </CardHeader>
          <CardContent>
            <div className="overflow-x-auto">
              <table className="w-full">
                <thead>
                  <tr className="border-b">
                    <th className="text-right p-3">משתמש</th>
                    <th className="text-right p-3">פעולה</th>
                    <th className="text-right p-3">פרטים</th>
                    <th className="text-right p-3">זמן</th>
                    <th className="text-right p-3">כתובת IP</th>
                  </tr>
                </thead>
                <tbody>
                  {auditLogs.map(log => (
                    <tr key={log.id} className="border-b">
                      <td className="p-3">{log.user}</td>
                      <td className="p-3">{log.action}</td>
                      <td className="p-3">{log.details}</td>
                      <td className="p-3">{log.timestamp}</td>
                      <td className="p-3">{log.ip}</td>
                    </tr>
                  ))}
                </tbody>
              </table>
            </div>
          </CardContent>
        </Card>
      </div>
    </div>
  );
};

export default SecurityDashboard;
```

### שלב 4: עדכון App.jsx לניתוב מותאם

עדכן את `src/App.jsx` להציג את הדשבורד המתאים לכל משתמש:

```javascript
import React, { useState, useEffect } from 'react';
import { Button } from '@/components/ui/button';
import Dashboard from './components/Dashboard';
import ProcurementRequest from './components/ProcurementRequest';
import CostEstimationResults from './components/CostEstimationResults';
import MarketResearch from './components/MarketResearch';
import SystemAdminDashboard from './components/SystemAdminDashboard';
import EconomistDashboard from './components/EconomistDashboard';
import ProcurementDashboard from './components/ProcurementDashboard';
import SecurityDashboard from './components/SecurityDashboard';
import LoginPage from './components/LoginPage';
import './App.css';

function App() {
  const [currentView, setCurrentView] = useState('login');
  const [user, setUser] = useState(null);

  useEffect(() => {
    // בדוק אם יש token שמור
    const token = localStorage.getItem('token');
    const userData = localStorage.getItem('user');
    
    if (token && userData) {
      setUser(JSON.parse(userData));
      setCurrentView(getDashboardByRole(JSON.parse(userData).role));
    }
  }, []);

  const getDashboardByRole = (role) => {
    switch (role) {
      case 'system_admin':
        return 'system_admin_dashboard';
      case 'economist':
        return 'economist_dashboard';
      case 'procurement':
        return 'procurement_dashboard';
      case 'security':
        return 'security_dashboard';
      default:
        return 'dashboard';
    }
  };

  const handleLogin = (userData) => {
    setUser(userData);
    setCurrentView(getDashboardByRole(userData.role));
  };

  const handleLogout = () => {
    localStorage.removeItem('token');
    localStorage.removeItem('user');
    setUser(null);
    setCurrentView('login');
  };

  const views = {
    login: { component: () => <LoginPage onLogin={handleLogin} />, title: 'כניסה למערכת' },
    dashboard: { component: Dashboard, title: 'לוח מחוונים' },
    system_admin_dashboard: { component: SystemAdminDashboard, title: 'דשבורד מנהל מערכת' },
    economist_dashboard: { component: EconomistDashboard, title: 'דשבורד כלכלן' },
    procurement_dashboard: { component: ProcurementDashboard, title: 'דשבורד איש רכש' },
    security_dashboard: { component: SecurityDashboard, title: 'דשבורד קב"ט' },
    request: { component: ProcurementRequest, title: 'דרישת רכש' },
    results: { component: CostEstimationResults, title: 'תוצאות אומדן' },
    research: { component: MarketResearch, title: 'מחקר שוק' }
  };

  const CurrentComponent = views[currentView].component;

  return <CurrentComponent onLogout={handleLogout} setCurrentView={setCurrentView} />;
}

export default App;
```

### שלב 5: עדכון דף הכניסה

עדכן את `src/components/LoginPage.jsx`:

```javascript
// עדכן את פרטי המשתמשים בדף הכניסה
const demoUsers = [
  {
    email: 'admin@company.com',
    role: 'מנהל מערכת',
    description: 'ניהול מלא של המערכת והמשתמשים',
    icon: '👨‍💼',
    features: [
      'ניהול משתמשים ותפקידים',
      'ניטור ביצועי מערכת',
      'הגדרות מערכת מתקדמות',
      'דוחות ניהוליים מקיפים'
    ]
  },
  {
    email: 'economist@company.com',
    role: 'כלכלן',
    description: 'אישור ובקרת אומדנים כלכליים',
    icon: '📊',
    features: [
      'אישור אומדנים שיצרו אנשי רכש',
      'ניתוח כלכלי מתקדם',
      'דוחות חיסכון ויעילות',
      'בקרת תקציבים'
    ]
  },
  {
    email: 'procurement@company.com',
    role: 'איש רכש',
    description: 'יצירת אומדנים ומחקר שוק',
    icon: '🛒',
    features: [
      'יצירת אומדנים חדשים',
      'מחקר שוק מתקדם',
      'ניתוח דרישות רכש',
      'העברה לאישור כלכלן'
    ]
  },
  {
    email: 'security@company.com',
    role: 'קב"ט',
    description: 'בקרת ביטחון מידע ופרטיות',
    icon: '🔒',
    features: [
      'ניטור התראות ביטחון',
      'בקרת מדיניות אבטחה',
      'לוגי ביקורת מפורטים',
      'זיהוי תוכן רגיש'
    ]
  }
];
```

## הנחיות יישום

1. **תחילה** - עדכן את מסד הנתונים עם המשתמשים הנכונים
2. **שנית** - צור את 4 הקומפוננטים החדשים
3. **שלישית** - עדכן את App.jsx לניתוב מותאם
4. **רביעית** - עדכן את דף הכניסה
5. **חמישית** - בדוק שכל משתמש רואה את הדשבורד המתאים לו

## בדיקות נדרשות

- התחבר עם כל אחד מ-4 המשתמשים
- וודא שכל משתמש רואה את הדשבורד המתאים לתפקידו
- בדוק שהתפקידים מוצגים נכון בדף הכניסה
- וודא שהפונקציונליות ייחודית לכל תפקיד

המטרה היא ליצור 4 ממשקים נפרדים ומותאמים שמשקפים את הצרכים הייחודיים של כל תפקיד בהתאם למסמך האפיון המקורי.

