#  -Replit Agent: 驻住 住住 专砖转 专砖 爪专 

## 转专 砖

** 专:**
驻住 住住  专砖转 专砖 转专 注 住住 "专 驻"  驻砖专  砖 转 转.

** 专砖:**
 专砖转 注专转 爪专转 专 住住 专砖 砖 "专 驻" ( "pending")  砖转   转  转 驻 专砖转 转.

## 转 转 砖转

**锔 转 砖转:**
- 爪注 专拽 转 驻住 转专 
-  转砖 专 专 专住 拽转
- 砖专 注  转 拽 (专拽 砖 住住)
- 砖专 注  驻拽爪转 拽转
- 砖专 注  注爪 住 拽

** 专转:**
- 爪专  砖 住 转 驻 爪注
-  砖驻住  砖驻注 注 转  专

## 驻转专 驻专

### 砖 1: 驻住 住住 住 转

#### 驻爪 1: 注 砖专 住 转 (抓)

```sql
--  驻 砖
CREATE TABLE procurement_requests_backup AS 
SELECT * FROM procurement_requests;

-- 驻住 住住  专砖转
UPDATE procurement_requests 
SET status = 'pending'
WHERE status != 'pending';

-- 拽 砖注 爪注
SELECT status, COUNT(*) as count 
FROM procurement_requests 
GROUP BY status;
```

#### 驻爪 2: 注 专 API endpoint

```python
# 拽抓 routes/procurement.py
from flask import Blueprint, jsonify
from models.procurement import ProcurementRequest
from database import db

@procurement_bp.route('/api/admin/reset-all-requests-status', methods=['POST'])
def reset_all_requests_status():
    """驻住 住住  专砖转 专砖 爪专 """
    try:
        # 住驻专转 专砖转 驻 注
        total_requests = ProcurementRequest.query.count()
        requests_to_update = ProcurementRequest.query.filter(
            ProcurementRequest.status != 'pending'
        ).count()
        
        # 爪注 驻住
        updated_count = ProcurementRequest.query.filter(
            ProcurementRequest.status != 'pending'
        ).update({'status': 'pending'})
        
        db.session.commit()
        
        return jsonify({
            'success': True,
            'message': '住住 专砖转 驻住 爪',
            'total_requests': total_requests,
            'updated_requests': updated_count,
            'timestamp': datetime.utcnow().isoformat()
        })
        
    except Exception as e:
        db.session.rollback()
        return jsonify({
            'success': False,
            'error': f'砖 驻住 住住: {str(e)}'
        }), 500

@procurement_bp.route('/api/admin/requests-status-summary', methods=['GET'])
def get_requests_status_summary():
    """拽转 住 住住 砖 专砖转"""
    try:
        from sqlalchemy import func
        
        status_summary = db.session.query(
            ProcurementRequest.status,
            func.count(ProcurementRequest.id).label('count')
        ).group_by(ProcurementRequest.status).all()
        
        summary = {status: count for status, count in status_summary}
        
        return jsonify({
            'success': True,
            'status_summary': summary,
            'total_requests': sum(summary.values())
        })
        
    except Exception as e:
        return jsonify({
            'success': False,
            'error': f'砖 拽转 住: {str(e)}'
        }), 500
```

### 砖 2: 驻住 转 住驻 (驻爪)

 砖 爪专 驻住  转 住驻 砖拽砖专 驻 专砖转:

```sql
-- 驻住 转 砖爪 ( 专爪 转 驻住)
UPDATE procurement_requests 
SET 
    extracted_data = NULL,
    extraction_date = NULL,
    extraction_status = 'not_extracted'
WHERE extraction_status = 'extracted';

-- 驻住 转专 注 专 (驻爪)
UPDATE procurement_requests 
SET last_updated = created_date;
```

### 砖 3: 爪专转 驻转专 驻住 砖拽 (驻爪)

 专爪 住祝 驻转专 驻住 砖拽 :

```jsx
// 拽驻 驻住 住住 专砖转
import React, { useState } from 'react';

const AdminResetPanel = () => {
  const [loading, setLoading] = useState(false);
  const [statusSummary, setStatusSummary] = useState(null);

  const loadStatusSummary = async () => {
    try {
      const response = await fetch('/api/admin/requests-status-summary');
      const data = await response.json();
      if (data.success) {
        setStatusSummary(data.status_summary);
      }
    } catch (error) {
      console.error('砖 注转 住 住住:', error);
    }
  };

  const resetAllRequestsStatus = async () => {
    if (!confirm(' 转  砖专爪 驻住 转 住住  专砖转? 驻注   转转 .')) {
      return;
    }

    setLoading(true);
    try {
      const response = await fetch('/api/admin/reset-all-requests-status', {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json',
        }
      });

      const result = await response.json();
      
      if (result.success) {
        alert(`驻住 砖 爪!\n注 ${result.updated_requests} 专砖转 转 ${result.total_requests}`);
        loadStatusSummary(); // 专注 住
      } else {
        alert('砖 驻住: ' + result.error);
      }
    } catch (error) {
      console.error('砖 驻住:', error);
      alert('砖 驻住 住住');
    } finally {
      setLoading(false);
    }
  };

  React.useEffect(() => {
    loadStatusSummary();
  }, []);

  return (
    <div className="admin-reset-panel">
      <h3>驻住 住住 专砖转 爪专 </h3>
      
      {statusSummary && (
        <div className="status-summary">
          <h4>住 住住 :</h4>
          <ul>
            {Object.entries(statusSummary).map(([status, count]) => (
              <li key={status}>
                {status}: {count} 专砖转
              </li>
            ))}
          </ul>
        </div>
      )}
      
      <div className="reset-actions">
        <button 
          onClick={resetAllRequestsStatus}
          disabled={loading}
          className="btn-danger"
        >
          {loading ? '驻住...' : '驻住 转  专砖转 住住 "专 驻"'}
        </button>
        
        <button 
          onClick={loadStatusSummary}
          className="btn-secondary"
        >
          专注 住
        </button>
      </div>
      
      <div className="warning-text">
        <p>锔 驻注转 驻住 转砖 转 住住  专砖转 -"专 驻"</p>
        <p> 驻注  注转 爪专  </p>
      </div>
    </div>
  );
};

export default AdminResetPanel;
```

### 砖 4: CSS 驻转专 驻住

```css
.admin-reset-panel {
  background: #fff3cd;
  border: 1px solid #ffeaa7;
  border-radius: 8px;
  padding: 20px;
  margin: 20px 0;
}

.admin-reset-panel h3 {
  color: #856404;
  margin-bottom: 15px;
}

.status-summary {
  background: #f8f9fa;
  padding: 15px;
  border-radius: 6px;
  margin: 15px 0;
}

.status-summary ul {
  list-style: none;
  padding: 0;
}

.status-summary li {
  padding: 5px 0;
  border-bottom: 1px solid #e9ecef;
}

.status-summary li:last-child {
  border-bottom: none;
}

.reset-actions {
  display: flex;
  gap: 15px;
  margin: 20px 0;
}

.btn-danger {
  background: #dc3545;
  color: white;
  border: none;
  padding: 12px 24px;
  border-radius: 6px;
  cursor: pointer;
  font-size: 1em;
  transition: background 0.2s;
}

.btn-danger:hover {
  background: #c82333;
}

.btn-danger:disabled {
  background: #6c757d;
  cursor: not-allowed;
}

.btn-secondary {
  background: #6c757d;
  color: white;
  border: none;
  padding: 12px 24px;
  border-radius: 6px;
  cursor: pointer;
  font-size: 1em;
  transition: background 0.2s;
}

.btn-secondary:hover {
  background: #5a6268;
}

.warning-text {
  background: #f8d7da;
  color: #721c24;
  padding: 10px;
  border-radius: 4px;
  margin-top: 15px;
}

.warning-text p {
  margin: 5px 0;
  font-size: 0.9em;
}
```

## 拽转 专砖转 专 驻住

### 拽转 住 转

```sql
-- 拽 1:  砖 专砖转 住住 "pending"
SELECT status, COUNT(*) as count 
FROM procurement_requests 
GROUP BY status;

-- 拽 2:  砖转 专  驻注
SELECT id, title, status, created_date 
FROM procurement_requests 
LIMIT 5;

-- 拽 3: 拽 砖 爪专 ( 砖转砖转 )
SELECT COUNT(*) FROM procurement_requests_backup;
```

### 拽转 砖拽 砖转砖

1. **拽转 专砖转 专砖转:**
   - 住 住 专砖转 专砖
   -  砖 专砖转 爪转 住住 "专 驻"

2. **拽转  拽专:**
   - 拽 砖住住拽转 注转
   -  砖住驻专 专砖转 转转 注

3. **拽转 驻拽爪转:**
   - 住 驻 专砖
   -  砖转 注 专

## 转 砖

### 住专 爪注 抓

1. **砖 1:  (5 拽转)**
   - 爪专  砖 住 转
   - 砖专 转  拽 

2. **砖 2: 驻住 住住 (10 拽转)**
   - 专 驻爪 转 (SQL 砖专  API)
   - 爪注 转 驻住
   - 拽 砖注 爪注

3. **砖 3: 拽转 (10 拽转)**
   - 拽 住 转
   - 拽 砖拽 砖转砖
   -  砖 注 专

4. **砖 4: 住驻转 驻转专 驻住 (驻爪 - 20 拽转)**
   - 住祝 转 拽驻 砖
   - 住祝 转 -API endpoints
   - 拽 砖驻转专 注

### 拽转 砖转 专

1. ** :**
   - 转 爪专  驻 砖 住 转
   - 砖专 转  拽 砖

2. **拽 驻 专:**
   - 住驻专  专砖转 砖 驻 驻住
   -  砖住驻专 砖专 专 驻住

3. **转注 砖:**
   - 专砖 转 爪注 驻住
   - 砖专 驻专 注 砖 砖爪注

## 转 砖砖

###  1: 驻住 驻砖 注 SQL

```sql
-- 拽 驻
SELECT '驻 驻住' as timing, status, COUNT(*) as count 
FROM procurement_requests 
GROUP BY status;

-- 爪注 驻住
UPDATE procurement_requests SET status = 'pending';

-- 拽 专
SELECT '专 驻住' as timing, status, COUNT(*) as count 
FROM procurement_requests 
GROUP BY status;
```

###  2: 驻住 注 API

```bash
# 拽转 住住 
curl http://localhost:5000/api/admin/requests-status-summary

# 爪注 驻住
curl -X POST http://localhost:5000/api/admin/reset-all-requests-status

# 拽转 住住 专 驻住
curl http://localhost:5000/api/admin/requests-status-summary
```

## 住

驻住  驻砖专   砖 转 驻 专砖转 专砖 转 注 :

1. **专转  专砖转 住住 专砖** - "专 驻"
2. **砖专 注  转 专** - 专拽 住住 砖转
3. **驻砖专转 驻住 专** - 爪专 转 住驻转
4. **  ** - 驻转专 驻住 砖拽 

**专: 驻注  注转 爪专    砖砖 住转 爪专!**
